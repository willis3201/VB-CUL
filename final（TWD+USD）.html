<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vbuygaming - å”®åƒ¹è¨ˆç®—ç³»çµ±</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .calculator-container { background-color: #ffffff; padding: 30px; border-radius: 12px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); width: 100%; max-width: 450px; }
        h2 { text-align: center; color: #333; margin-top: 0; margin-bottom: 20px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; color: #555; margin-bottom: 8px; }
        select, input[type="number"] { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 16px; transition: border-color 0.3s; }
        select:focus, input[type="number"]:focus { border-color: #4CAF50; outline: none; }
        .help-text { font-size: 0.85em; color: #888; margin-top: 4px; display: block; }
        
        /* å–®é¸æŒ‰éˆ•æ¨£å¼ */
        .radio-group { display: flex; gap: 15px; margin-bottom: 10px; }
        .radio-label { display: flex; align-items: center; font-weight: normal; color: #333; cursor: pointer; font-size: 0.95em; }
        .radio-label input { margin-right: 6px; width: auto; }
        
        /* é ‚éƒ¨æ¸ é“åˆ‡æ›æ¨£å¼ */
        .channel-switch { display: flex; justify-content: center; gap: 10px; background: #e0f2f1; padding: 10px; border-radius: 8px; margin-bottom: 20px; }
        .channel-switch .radio-label { font-weight: 600; color: #00695c; font-size: 1.1em; }

        .result-panel { background-color: #e8f5e9; border-left: 6px solid #4CAF50; padding: 20px; border-radius: 8px; margin-top: 25px; }
        .result-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 1.1em; color: #333; }
        .final-price { font-size: 1.6em; font-weight: bold; color: #2e7d32; border-top: 1px solid #c8e6c9; padding-top: 15px; margin-top: 10px; display: flex; justify-content: space-between; }
        
        /* å€å¡Šé¡¯ç¤ºæ§åˆ¶ */
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div class="calculator-container">
    <h2>Vbuygaming</h2>

    <div class="channel-switch">
        <label class="radio-label">
            <input type="radio" name="mainChannel" value="usd" checked>
            ğŸ‡ºğŸ‡¸ ç¾é‡‘æ¸ é“
        </label>
        <label class="radio-label">
            <input type="radio" name="mainChannel" value="twd">
            ğŸ‡¹ğŸ‡¼ å°å¡æ¸ é“
        </label>
    </div>

    <div id="usd-section">
        <div class="form-group">
            <label>1. åŸåƒ¹ç¾é‡‘</label>
            <div class="radio-group">
                <label class="radio-label"><input type="radio" name="usdPriceMode" value="standard" checked> å¸¸è¦‹æ¸¯å¹£é¢é¡</label>
                <label class="radio-label"><input type="radio" name="usdPriceMode" value="custom"> è‡ªè¨‚ç¾é‡‘</label>
            </div>
            <select id="usd-tier">
                <option value="0">è«‹é¸æ“‡å°æ‡‰çš„æ¸¯å¹£åŸåƒ¹...</option>
                <option value="0.99">HK$ 8 (å°æ‡‰ US$ 0.99)</option>
                <option value="4.99">HK$ 38 (å°æ‡‰ US$ 4.99)</option>
                <option value="9.99">HK$ 78 (å°æ‡‰ US$ 9.99)</option>
                <option value="11.99">HK$ 98 (å°æ‡‰ US$ 11.99)</option>
                <option value="14.99">HK$ 118 (å°æ‡‰ US$ 14.99)</option>
                <option value="19.99">HK$ 158 (å°æ‡‰ US$ 19.99)</option>
                <option value="29.99">HK$ 238 (å°æ‡‰ US$ 29.99)</option>
                <option value="49.99">HK$ 388 / 418 (å°æ‡‰ US$ 49.99)</option>
                <option value="99.99">HK$ 788 (å°æ‡‰ US$ 99.99)</option>
            </select>
            <input type="number" id="usd-custom" class="hidden" placeholder="è¼¸å…¥ç¾é‡‘åŸåƒ¹ (ä¾‹å¦‚: 19.99)" step="0.01" style="margin-top:10px;">
        </div>

        <div class="form-group">
            <label>2. ä¾†è²¨ (USD -> CNY)</label>
            <input type="number" id="usd-rate" placeholder="ä¾‹å¦‚: 5.75" step="0.01">
            <span class="help-text">1 ç¾é‡‘ = ? äººæ°‘å¹£ (è‡ªå‹•è¨˜æ†¶)</span>
        </div>
    </div>

    <div id="twd-section" class="hidden">
        <div class="form-group">
            <label>1. åŸåƒ¹å°å¹£</label>
            <div class="radio-group">
                <label class="radio-label"><input type="radio" name="twdPriceMode" value="standard" checked> å¸¸è¦‹æ¸¯å¹£é¢é¡</label>
                <label class="radio-label"><input type="radio" name="twdPriceMode" value="custom"> è‡ªè¨‚å°å¹£</label>
            </div>
            <select id="twd-tier">
                <option value="0">è«‹é¸æ“‡å°æ‡‰çš„æ¸¯å¹£åŸåƒ¹...</option>
                <option value="33">HK$ 8 (å°æ‡‰ NT$ 33)</option>
                <option value="170">HK$ 38 (å°æ‡‰ NT$ 170)</option>
                <option value="330">HK$ 78 (å°æ‡‰ NT$ 330)</option>
                <option value="390">HK$ 98 (å°æ‡‰ NT$ 390)</option>
                <option value="490">HK$ 118 (å°æ‡‰ NT$ 490)</option>
                <option value="590">HK$ 158 (å°æ‡‰ NT$ 590 / 670)</option>
                <option value="990">HK$ 238 (å°æ‡‰ NT$ 990)</option>
                <option value="1690">HK$ 388 / 418 (å°æ‡‰ NT$ 1690)</option>
                <option value="3290">HK$ 788 (å°æ‡‰ NT$ 3290)</option>
            </select>
            <input type="number" id="twd-custom" class="hidden" placeholder="è¼¸å…¥å°å¹£åŸåƒ¹ (ä¾‹å¦‚: 990)" step="1" style="margin-top:10px;">
        </div>

        <div class="form-group">
            <label>2. ä¾†è²¨ (TWD -> CNY)</label>
            <input type="number" id="twd-rate" placeholder="ä¾‹å¦‚: 0.180" step="0.001">
            <span class="help-text">1 å°å¹£ = ? äººæ°‘å¹£ (è‡ªå‹•è¨˜æ†¶ï¼Œä¾‹å¦‚: 0.180)</span>
        </div>
    </div>

    <div class="form-group">
        <label>3. é æœŸåˆ©æ½¤ (CNY)</label>
        <input type="number" id="profit-cny" placeholder="ä¾‹å¦‚: 30" step="1">
    </div>

    <div class="form-group">
        <label>4. å¯¦éš›çµç®—åŒ¯ç‡ (HKD -> CNY)</label>
        <input type="number" id="real-rate" placeholder="ä¾‹å¦‚: 0.92" step="0.001">
        <span class="help-text">1 æ¸¯å¹£ç­‰æ–¼å¤šå°‘äººæ°‘å¹£ (ä¾‹å¦‚: 0.92)</span>
    </div>

    <div class="result-panel">
        <div class="result-row">
            <span id="label-original-price">ç¾é‡‘åŸåƒ¹ (USD):</span>
            <span id="display-original-price">$ 0.00</span>
        </div>
        <div class="result-row">
            <span>é€²è²¨æˆæœ¬ (CNY):</span>
            <span id="display-cost-cny">Â¥ 0.00</span>
        </div>
        <div class="result-row">
            <span>å«åˆ©æ½¤ç¸½é¡ (CNY):</span>
            <span id="display-total-cny">Â¥ 0.00</span>
        </div>
        <div class="final-price">
            <span>å»ºè­°å”®åƒ¹ (HKD):</span>
            <span id="display-final-hkd">HK$ 0</span>
        </div>
    </div>
</div>

<script>
    // ç²å– DOM å…ƒç´ 
    const channelRadios = document.querySelectorAll('input[name="mainChannel"]');
    const usdSection = document.getElementById('usd-section');
    const twdSection = document.getElementById('twd-section');

    const usdPriceRadios = document.querySelectorAll('input[name="usdPriceMode"]');
    const usdTierSelect = document.getElementById('usd-tier');
    const usdCustomInput = document.getElementById('usd-custom');
    const usdRateInput = document.getElementById('usd-rate');

    const twdPriceRadios = document.querySelectorAll('input[name="twdPriceMode"]');
    const twdTierSelect = document.getElementById('twd-tier');
    const twdCustomInput = document.getElementById('twd-custom');
    const twdRateInput = document.getElementById('twd-rate');

    const profitCnyInput = document.getElementById('profit-cny');
    const realRateInput = document.getElementById('real-rate');

    const labelOriginalPrice = document.getElementById('label-original-price');
    const displayOriginalPrice = document.getElementById('display-original-price');
    const displayCostCny = document.getElementById('display-cost-cny');
    const displayTotalCny = document.getElementById('display-total-cny');
    const displayFinalHkd = document.getElementById('display-final-hkd');

    // åˆå§‹åŒ–èˆ‡è®€å–è¨˜æ†¶
    window.onload = function() {
        if(localStorage.getItem('usdRate')) usdRateInput.value = localStorage.getItem('usdRate');
        if(localStorage.getItem('twdRate')) twdRateInput.value = localStorage.getItem('twdRate');
        if(localStorage.getItem('profitCny')) profitCnyInput.value = localStorage.getItem('profitCny');
        if(localStorage.getItem('realRate')) realRateInput.value = localStorage.getItem('realRate');
        calculate();
    }

    // æ¸ é“åˆ‡æ›é‚è¼¯
    channelRadios.forEach(radio => {
        radio.addEventListener('change', (e) => {
            if (e.target.value === 'usd') {
                usdSection.classList.remove('hidden');
                twdSection.classList.add('hidden');
                labelOriginalPrice.innerText = "ç¾é‡‘åŸåƒ¹ (USD):";
            } else {
                usdSection.classList.add('hidden');
                twdSection.classList.remove('hidden');
                labelOriginalPrice.innerText = "å°å¹£åŸåƒ¹ (TWD):";
            }
            calculate();
        });
    });

    // ç¾é‡‘è‡ªè¨‚åˆ‡æ›
    usdPriceRadios.forEach(radio => {
        radio.addEventListener('change', (e) => {
            if (e.target.value === 'custom') {
                usdTierSelect.classList.add('hidden');
                usdCustomInput.classList.remove('hidden');
            } else {
                usdTierSelect.classList.remove('hidden');
                usdCustomInput.classList.add('hidden');
            }
            calculate();
        });
    });

    // å°å¹£è‡ªè¨‚åˆ‡æ›
    twdPriceRadios.forEach(radio => {
        radio.addEventListener('change', (e) => {
            if (e.target.value === 'custom') {
                twdTierSelect.classList.add('hidden');
                twdCustomInput.classList.remove('hidden');
            } else {
                twdTierSelect.classList.remove('hidden');
                twdCustomInput.classList.add('hidden');
            }
            calculate();
        });
    });

    // æ ¸å¿ƒè¨ˆç®—é‚è¼¯
    function calculate() {
        const currentChannel = document.querySelector('input[name="mainChannel"]:checked').value;
        const profitCny = parseFloat(profitCnyInput.value) || 0;
        const realRate = parseFloat(realRateInput.value) || 0;
        
        let originalPrice = 0;
        let costCny = 0;

        if (currentChannel === 'usd') {
            // è™•ç†ç¾é‡‘é‚è¼¯
            const mode = document.querySelector('input[name="usdPriceMode"]:checked').value;
            originalPrice = mode === 'custom' ? (parseFloat(usdCustomInput.value) || 0) : (parseFloat(usdTierSelect.value) || 0);
            const usdRate = parseFloat(usdRateInput.value) || 0;
            costCny = originalPrice * usdRate;
            
            localStorage.setItem('usdRate', usdRateInput.value);
            displayOriginalPrice.innerText = `$ ${originalPrice.toFixed(2)}`;
        } else {
            // è™•ç†å°å¹£é‚è¼¯
            const mode = document.querySelector('input[name="twdPriceMode"]:checked').value;
            originalPrice = mode === 'custom' ? (parseFloat(twdCustomInput.value) || 0) : (parseFloat(twdTierSelect.value) || 0);
            const twdRate = parseFloat(twdRateInput.value) || 0;
            costCny = originalPrice * twdRate;
            
            localStorage.setItem('twdRate', twdRateInput.value);
            displayOriginalPrice.innerText = `NT$ ${originalPrice.toFixed(0)}`;
        }

        // å„²å­˜å…±ç”¨è¨­å®š
        localStorage.setItem('profitCny', profitCnyInput.value);
        localStorage.setItem('realRate', realRateInput.value);

        // çµç®—
        const totalCny = costCny + profitCny;
        let finalHkd = 0;
        if (realRate > 0) {
            finalHkd = totalCny / realRate;
        }

        displayCostCny.innerText = `Â¥ ${costCny.toFixed(2)}`;
        displayTotalCny.innerText = `Â¥ ${totalCny.toFixed(2)}`;
        displayFinalHkd.innerText = `HK$ ${Math.ceil(finalHkd)}`; 
    }

    // ç›£è½æ‰€æœ‰è¼¸å…¥è®Šæ›´
    const inputs = [usdTierSelect, usdCustomInput, usdRateInput, twdTierSelect, twdCustomInput, twdRateInput, profitCnyInput, realRateInput];
    inputs.forEach(input => input.addEventListener('input', calculate));
    usdTierSelect.addEventListener('change', calculate);
    twdTierSelect.addEventListener('change', calculate);

</script>
</body>
</html>